# Yandex Backend School Project
---
### Описание .ENV файла
- ***db_connect*** - строка подключения базы данных SQLite для разработки (sqlite:///./sql_app.db)
- ***test_db_connect*** - строка подключения базы данных SQLite для тестирования. Автоматически удаляется после завершения тестирования. (sqlite:///./sql_test.db)
- ***production_db_connect*** - PRODUCTION Postgres база данных (postgresql://postgres:123456@db/prod')
- ***production_test_db_connect*** - PRODUCTION TESTING Postgres база данных. Удаляется после завершения работы приложения. (postgresql://postgres:123456@db-test/test)
- ***PRODUCTION*** - установить любое значение, если запускается в продакшн моде. Postgres support
---
>.***test.env*** файл - служебный. Редактировать не нужно!
---
### Развертывание
Для развертывания приложения требуется Docker и Docker-compose.
1. Создать корневую папку проекта
2. Склонировать репозиторий
3. ***ВАЖНО:*** Назначить права на выполнение файла ***./start.sh*** командой ***chmod +x ./start.sh***
4. ***ВАЖНО:*** Назначить права на запись в корневой директории командой ***chmod +w .***
3. При необходимости отредактировать ***docker-compose*** файл
4. При необходимости отредактировать ***.ENV*** файл
5. Добавить в ***.ENV*** переменную ***PRODUCTION='True'*** для поддержки ***PostgreSQL*** Если переменная не указана, то используется SQLite
6. Выполнить ***sudo docker-compose up*** <br/>
Для запуска в фоне выполнить ***sudo docker-compose up -d*** <br/>
Для остановки выполнить ***sudo docker-compose down***
---
### Тесты
Тесты запускаются автоматически при запуске сервиса. Лог тестов создается в корневой директории проекта в файл ***test_logs.txt***

---
### Дроп базы данных
Чтобы очистить базу данных выполнить: ***sudo rm -rf ./data*** в корневой директории проекта
